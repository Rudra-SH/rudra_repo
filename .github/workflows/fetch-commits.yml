name: List Repository Commits

on:
  workflow_dispatch: # Allows manual triggering

jobs:
  list_commits:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '16'

      - name: Install Dependencies
        run: npm install @octokit/rest

      - name: Fetch Commits using Octokit
        env:
          owner: my-repo-owner # Replace with the owner of the repo
          repo: my-repo-name   # Replace with the repository name
        uses: actions/github-script@v7
        with:
          script: |
            const firstCommitResponse = await github.rest.repos.listCommits({
            	owner: 'Rudra-SH',
            	repo: 'rudra_repo',
            	sha: 'main',
            	per_page: 1,
            	page: 1,
            	direction: 'asc' // Ensures commits are returned in chronological order
            });
            console.log(firstCommitResponse);
