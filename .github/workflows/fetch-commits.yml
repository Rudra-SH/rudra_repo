name: List Repository Commits

on:
  workflow_dispatch: # Allows manual triggering

jobs:
  list_commits:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '16'

      - name: Install Dependencies
        run: npm install @octokit/rest

      - name: Fetch Commits using Octokit
        env:
          owner: my-repo-owner # Replace with the owner of the repo
          repo: my-repo-name   # Replace with the repository name
        uses: actions/github-script@v7
        with:
          script: |
            const { Octokit } = require("@octokit/core");
      
            const octokit = new Octokit({
              auth: process.env.GITHUB_TOKEN,
            });
      
            const response = await octokit.request('GET /repos/{owner}/{repo}/commits', {
              owner: process.env.owner,
              repo: process.env.repo,
              headers: {
                'X-GitHub-Api-Version': '2022-11-28'
              }
            });
      
            console.log(response.data); // Logs the entire list of commits
            const firstCommit = response.data[0].sha;
            console.log(`First commit SHA: ${firstCommit}`);
